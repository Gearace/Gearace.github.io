<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <title> 用koa堆个Web框架（零） · 逼格人溜溜溜 </title>
    <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<link rel="stylesheet" href="/style/style.css">
<script src="/script/jquery.min.js"></script>
<script>
    var CONFIG = {
        title: "逼格人溜溜溜",
        author: "Gearace",
        lightbox: true,
        animate: true
    }
</script>



    <link rel="stylesheet" href="/lightbox/css/lightbox.min.css">




    <link rel="stylesheet" href="/syuanpi/syuanpi.min.css">










</head>
<body>
    <div class="progress">
    <div class="progress-inner"></div>
</div>
    <div class="body">
    <div class="tagcloud" id="tagcloud">
    <div class="tagcloud-inner">
        <a href="/tags/koa/" style="font-size: 14px;">koa</a> <a href="/tags/node-js/" style="font-size: 14px;">node.js</a> <a href="/tags/typhon/" style="font-size: 14px;">typhon</a>
    </div>
</div>
    <header class="header" id="header">
    <div class="title syuanpi tvIn">
    <div class="table">
        <div class="connect">
            <div class="connect-inner">
                <span><a href="/">逼格人溜溜溜</a></span>
                
                    <span id="subtitle">做个有逼格的人才老铁溜溜溜</span>
                
            </div>
        </div>
    </div>
</div>
    <nav class="main-nav syuanpi tvIn">
<div class="table">

    <ul class="menu">
        
        
            <li class="menu-item">
                <a href="/">
                    <span>文章</span>
                    
                        <span class="menu-item-label">article</span>
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="/archives">
                    <span>归档</span>
                    
                        <span class="menu-item-label">archives</span>
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="javascript:;" id="tags">
                    <span>标签</span>
                    
                        <span class="menu-item-label">tags</span>
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="/about">
                    <span>关于</span>
                    
                        <span class="menu-item-label">about</span>
                    
                </a>
            </li>
        
        
    </ul>

</div>
</nav>
<div class="mobile-nav"></div>
</header>
    <div class="container">
        <main class="main" id="main">
            
    
    <article class="post">
        <header class="post-header">
            <div class="post-time syuanpi riseIn-light back-1">
                <span>2017年6月5日</span>
            </div>
            <h1 class="post-title syuanpi riseIn-light back-2">
            
                用koa堆个Web框架（零）
            
            </h1>
            
                
                    <div class="post-tags syuanpi riseIn-light back-3">
                    
                        <a href="/tags/typhon/">typhon</a>
                    
                        <a href="/tags/node-js/">node.js</a>
                    
                        <a href="/tags/koa/">koa</a>
                    
                    </div>
                
            
        </header>
        <div class="post-content syuanpi riseIn-light back-3">
            
                <h1 id="开篇自黑"><a href="#开篇自黑" class="headerlink" title="开篇自黑"></a><strong>开篇自黑</strong></h1><p>从07年开始工作，就一直在用Java，从当年风靡的SSH(struts1+spring+hibernate)，到后来的SpringMVC+Spring+JPA，晃晃悠悠的生活，稀里糊涂的工作，一转眼就10年过去了，自己也从来没有深入的了解过什么是框架，想了很多理由，比如Spring实现逻辑复杂，工作很忙没有时间。事实上，只是因为懒。</p>
<a id="more"></a>
<p>直到技术更新换代越来越可怕，直到发现JS都能写后台的时候，才开始觉得自己真的落伍了，乱七八糟的知道不少，什么都没有专精，也许，是时候深挖一些东西了。真的决定开始做的时候，却又犯了难，到底要不要看Spring？还是尝试一些新的东西？虽然Java是我用了很久的语言也很熟悉，但是最终我放弃了Spring，理由很简单，我还没有那么深的层次，不如全部打破，把自己当成一个新人，重新开始！于是乎就有了堆砌框架的想法。</p>
<hr>
<h2 id="为什么选koa-V1？"><a href="#为什么选koa-V1？" class="headerlink" title="为什么选koa V1？"></a><strong>为什么选koa V1？</strong></h2><p><img src="http://oqxcxwdtv.bkt.clouddn.com/img/koa.jpg" alt="koajs"></p>
<p>选koa就是因为我对js本身的了解就很浅薄，同时又认为js是非常666的一个开发语言，最重要的是，感觉上js没有封装的那么深，也许可以从头开始理解一些以前不能理解的东西。</p>
<p>至于版本，当我有堆砌的念头的时候，那时候koa才刚刚起步，那时候nodejs还需要配合–harmony参数启动，等到我一边自我怀疑一边断断续续做下来，koa已经出到v2了，nodejs也已经到了7。</p>
<p>但，既然已经做了，就不能半途而废，koa v1并不差，只是没有使用ES2016的很多不一样的更安全的写法和更便捷的新特性，所以，通篇koa指的是V1版本的koa。</p>
<h2 id="所谓框架的认识"><a href="#所谓框架的认识" class="headerlink" title="所谓框架的认识"></a><strong>所谓框架的认识</strong></h2><p>框架对一个JavaWeb程序员来说，Spring可能是最常见常用的框架，可惜我对Spring的掌握仅仅限于怎么做一个后台管理应用而已。</p>
<p>层次不够，认识就很low，加上SSH对我的影响是难以形容的，所以我认识的框架就是能够处理Web请求，一些业务逻辑，并实现数据存储，页面展现的开发包，简单的看看是不是一个SpringMVC或者SSH的简单复制呢？</p>
<p><img src="http://oqxcxwdtv.bkt.clouddn.com/img/ssh.png" alt="盗SSH图一张"></p>
<p>本系列博文目标就是慢慢的尝试堆砌一个能够实现这种浅薄认识的框架。</p>
<h2 id="框架里应该有些什么？"><a href="#框架里应该有些什么？" class="headerlink" title="框架里应该有些什么？"></a><strong>框架里应该有些什么？</strong></h2><p>Web应用，首先要有能够处理Http请求的能力，其次就是业务逻辑的处理，然后是对数据的存储，最后就是结果的反馈。</p>
<p>但是单纯的这些，并不能组成一个五脏俱全的麻雀，还有路由，日志，session，参数校验，授权，异常，安全组件，OAuth等等。</p>
<p>既然我们的目标是堆砌，那么就要站在巨人的肩膀上，尽量避免重复的轮子，直接去选择合适自己组件，拿来就用，也不做什么高层封装，cli生成，全部都是裸露的npm中间件引入和使用。</p>
<h2 id="从那里入手呢？"><a href="#从那里入手呢？" class="headerlink" title="从那里入手呢？"></a><strong>从那里入手呢？</strong></h2><p>但凡是自己不熟悉的东西，入手是最困难的，堆砌一个框架也是如此。从来只是用，也不曾看过别人框架源码的我，选择了最笨的办法，一个个找一个个试！</p>
<p>值得庆幸的是，koajs的github提供了一个完整的<a href="https://github.com/koajs/koa/wiki" target="_blank" rel="external">中间件列表</a>，在这里可以找到上面提到的所有内容，当然了也有别人完善的框架。</p>
<h2 id="开始之前"><a href="#开始之前" class="headerlink" title="开始之前"></a><strong>开始之前</strong></h2><p>工欲善其事必先利其器，先做点准备工作总是不会错的。</p>
<p>开发环境：nodejs</p>
<p>开发IDE：WebStorm or VScode</p>
<p>浏览器：Chrome</p>

            
        
        </div>
        
            
            
    <hr class="copy-line">
    <div class="post-copyright">
        <div class="copy-author">
            <span>作者 :</span>
            <span>Gearace</span>
        </div>
        <div class="copy-url">
            <span>地址 :</span>
            <a href="http://biger666.win/2017/06/05/用KOA堆个Web框架（零）/">http://biger666.win/2017/06/05/用KOA堆个Web框架（零）/</a>
        </div>
        <div class="copy-origin">
            <span>来源 :</span>
            <a href="http://biger666.win">http://biger666.win</a>
        </div>
        <div class="copy-license">
            
            著作权归作者所有，转载请联系作者获得授权。
        </div>
    </div>

        
    </article>
    
        
    <nav class="article-page">
        
            <a href="/2017/06/05/用koa堆个Web框架（一）/" id="art-left" class="art-right">
                <span class="next-title">
                    用koa堆个Web框架（一）<i class="iconfont icon-right"></i> 
                </span>
            </a>
        
        
            <a href="/2017/06/02/新的开始/" id="art-right" class="art-left">
                <span class="prev-title"> 
                    <i class="iconfont icon-left"></i>新的开始
                </span>
            </a>
        
    </nav>

        
    <i id="com-switch" class="iconfont icon-more syuanpi jumping-in long infinite" style="font-size:24px;display:block;text-align:center;"></i>
    <div class="post-comments" id="post-comments" style="display: none;margin: auto 16px;">
        
        
        
    <div class="cloud-tie-wrapper" id="cloud-tie-wrapper"></div>
    <script>
      var cloudTieConfig = {
          url: document.location.href,
          sourceId: "",
          productKey: "86144dca1df2486eaad14d94c927017a",
          target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script>

        <!-- Disqus Comments -->


    </div>

    


        </main>
        <footer class="footer syuanpi fadeIn" id="footer">
    <hr>
    <div class="footer-wrapper">
        <div class="left">
            <div class="contact-icon">
    
    
    
    
    
    
    
    
        
            <a href="https://github.com/gearace" class="iconfont icon-github" title="github"></a>
        
        
        
        
        
        
        
    
        
        
            <a href="https://weibo.com/holyeah" class="iconfont icon-weibo" title="weibo"></a>
        
        
        
        
        
        
    
        
        
        
            <a href="https://twitter.com/JeaRayee" class="iconfont icon-twitter" title="twitter"></a>
        
        
        
        
        
    
</div>
        </div>
        <div class="right">
            <div class="copyright">
    <div class="info">
        <span>&copy;</span>
        <span>2017 ~ 2017</span>
        <span>❤</span>
        <span>Gearace</span>
    </div>
    <div class="theme">
        <span>
            动力来源于
            <a href="http://hexo.io/" target="_blank">Hexo </a>
        </span>
        <span>
            主题
            <a href="https://github.com/ColMugX/hexo-theme-Nlvi"> Nlvi </a>
        </span>
    </div>
    
</div>
        </div>
    </div>
</footer>
    </div>
    <script src="/script/nlvi.js"></script>

    <script src="/lightbox/js/lightbox.min.js"></script>

<script>
$(document).ready(function(){
    document.body.addEventListener('touchstart', function () {});
    $('.progress').hide();
    $('.body').show();
    Nlvi.tagcloud();
    Nlvi.back2top();
    Nlvi.showToc();
    Nlvi.showComments();
    Nlvi.showReward()

    !CONFIG.animate && Nlvi.offAnimate();
    CONFIG.lightbox && Nlvi.onPicBox();
})
</script>
    </div>
    
        
    <div class="post-toc">
        <span class="title">文章目录</span>
        <div class="toc-inner syuanpi back-1 fallIn-light">
            <li class="title-link"><a href="javascript:;" class="toTop">用koa堆个Web框架（零）</a></li>
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#开篇自黑"><span class="toc-text">开篇自黑</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#为什么选koa-V1？"><span class="toc-text">为什么选koa V1？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#所谓框架的认识"><span class="toc-text">所谓框架的认识</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#框架里应该有些什么？"><span class="toc-text">框架里应该有些什么？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#从那里入手呢？"><span class="toc-text">从那里入手呢？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#开始之前"><span class="toc-text">开始之前</span></a></li></ol></li></ol>
        </div>
    </div>

    
    <div class="backtop syuanpi dead toTop" id="backtop">
    <i class="iconfont icon-up"></i>
    <span style="text-align:center;font-family:Georgia;"><span style="font-family:Georgia;" id="scrollpercent">1</span>%</span>
</div>
</body>
</html>
